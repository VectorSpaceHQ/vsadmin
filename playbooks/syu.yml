- name: Update package repositories
  hosts: computer-lab
  become: yes
  become_method: su
  tasks:

    - name: Remove DVD repos from sources (Debian)
      when: ansible_os_family == "Debian"
      replace:
        path: /etc/apt/sources.list
        regexp: '^deb cdrom'
        replace: '# deb cdrom'

    - name: add non-free sources (Debian)
      when: ansible_os_family == "Debian"
      replace:
        path: /etc/apt/sources.list
        regexp: 'main$'
        replace: 'main contrib non-free'

    - name: add non-free sources (Debian)
      when: ansible_os_family == "Debian"
      replace:
        path: /etc/apt/sources.list
        regexp: 'main non-free$'
        replace: 'main contrib non-free'

    - name: add non-free sources (Debian)
      when: ansible_os_family == "Debian"
      replace:
        path: /etc/apt/sources.list
        regexp: 'contrib$'
        replace: 'contrib non-free'


